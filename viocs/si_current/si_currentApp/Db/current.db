record(calc, "SIDI-CURRENT")
{
    field(DESC, "SI current")
    field(SCAN, ".1 second")
    field(PREC, 10)
    field(INPA, "VA-SIDI-CURRENT")
    field(INPB, "VA-SIDI-CURRENT-NOISELEVEL")
    field(CALC, "A + (1e-3)*B*(RNDM*2.0 - 1.0)")
    field(EGU, "mA")
}

record(ai, "VA-SIDI-CURRENT-NOISELEVEL")
{
    field(DESC, "Noise level for beam current")
    field(INP, 10)
    field(EGU, "uA")
}

record(aSub, "ADD-NOISE-SIDI-BCURRENT")
{
    field(SCAN, ".1 second")
    field(SNAM, "add_noise")
    field(INPA, "VA-SIDI-BCURRENT")
    field(INPB, "VA-SIDI-CURRENT-NOISELEVEL")
    field(NOA, 864)
    field(NOB, 1)
    field(NOVA, 864)
    field(FLNK, "SIDI-BCURRENT")
}

record(waveform, "SIDI-BCURRENT")
{
    field(DESC, "SI bunch current")
    field(INP, "ADD-NOISE-SIDI-BCURRENT.A")
    field(NELM, 864)
    field(FTVL, "DOUBLE")
    field(EGU, "mA")
}
