
record(ai, "BO-Fam:DI-BPM:NoiseLvl")
{
    field(DESC, "Noise level for bpm")
    field(INP, 100e-9)
    field(EGU, "m")
}

record(calc, "BO-$(sector)U:DI-BPM:PosX-Mon")
{
    field(DESC, "BO BPM sector $(sector) pos U x")
    field(SCAN, ".1 second")
    field(INPA, "VA-BO-$(sector)U:DI-BPM:PosX-Mon")
    field(INPB, "BO-Fam:DI-BPM:NoiseLvl")
    field(CALC, "A + B*(2.0*RNDM - 1.0)*(2.0*RNDM - 1.0)")
    field(EGU, "m")
    field(FLNK, "BO-$(sector)U:DI-BPM:PosY-Mon")
}

record(calc, "BO-$(sector)U:DI-BPM:PosY-Mon")
{
    field(DESC, "BO BPM sector $(sector) pos U y")
    field(INPA, "VA-BO-$(sector)U:DI-BPM:PosY-Mon")
    field(INPB, "BO-Fam:DI-BPM:NoiseLvl")
    field(CALC, "A + B*(2.0*RNDM - 1.0)*(2.0*RNDM - 1.0)")
    field(EGU, "m")
}

record(aSub, "Add-Noise-BO-Fam:DI-BPM")
{
    field(SCAN, ".1 second")
    field(SNAM, "add_noise")
    field(INPA, "VA-BO-Fam:DI-BPM:PosX-Mon")
    field(INPB, "VA-BO-Fam:DI-BPM:PosY-Mon")
    field(INPC, "BO-Fam:DI-BPM:NoiseLvl")
    field(NOA, 50)
    field(NOB, 50)
    field(NOC, 1)
    field(NOVA, 50)
    field(NOVB, 50)
    field(FLNK, "BO-Fam:DI-BPM:PosX-Mon")
}

record(waveform, "BO-Fam:DI-BPM:PosX-Mon")
{
    field(DESC, "BO BPM FAM X")
    field(INP, "Add-Noise-BO-Fam:DI-BPM.A")
    field(NELM, 50)
    field(FTVL, "DOUBLE")
    field(EGU, "m")
    field(FLNK, "BO-Fam:DI-BPM:PosY-Mon")
}

record(waveform, "BO-Fam:DI-BPM:PosY-Mon")
{
    field(DESC, "BO BPM FAM Y")
    field(INP, "Add-Noise-BO-Fam:DI-BPM.B")
    field(NELM, 50)
    field(FTVL, "DOUBLE")
    field(EGU, "m")
}
